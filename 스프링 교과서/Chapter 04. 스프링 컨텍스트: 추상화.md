# Chapter 04. 스프링 컨텍스트: 추상화

## 4.1 계약 정의를 위한 인터페이스 사용

- 자바에서 인터페이스는 특정 책임을 선언하는 데 사용하는 추상 구조다.
- **인터페이스는 '무엇이 발생해야 하는지(필요 대상)'를 지정하는 반면, 인터페이스를 구현하는 모든 객체는 '어떻게 그것이 발생해야 하는지(발생 방법)'를 지정한다.**
- 인터페이스란 객체가 필요한 것을 요청하는 방식이다.

### 4.1.1 구현 분리를 위해 인터페이스 사용

- 구현에 직접 의존하지 않고, 인터페이스에 의존한다.
- 인터페이스의 구현을 변경하더라도 책임을 사용하는 객체를 더 변경할 필요가 없다.

### 4.1.3 프레임워크 없이 요구 사항 구현

- 표준적인 실제 애플리케이션에서는 사용 사례를 구현하는 객체를 일반적으로 서비스(service)라고 한다.
- 데이터베이스와 직접 작업하는 객체가 있을 때 일반적으로 이런 객체 이름을 레포지토리(repository)라고 한다. 또는 DAO(Data Access Object)라고도 한다.
- 앱 외부와 통신을 담당하는 객체는 프록시(proxy)라고 한다.

> POJO
> - 의존성이 없는 단순 객체로, 속성과 메서드로만 기술된다.

## 4.2 추상화와 함께 의존성 주입

- 스프링 컨텍스트에 객체를 추가하는 가장 큰 이유는 스프링이 객체를 제어하고 프레임워크가 제공하는 기능으로 객체를 더욱 보강할 수 있도록 하려는 것이다.

### 4.2.1 스프링 컨텍스트에 포함될 객체 정하기

- 프레임워크에서 얻는 이점도 없는데 스프링이 관리할 객체만 추가하는 것은 오버엔지니어링 구현을 하는 것이다.
- 인터페이스는 추상적이므로 스테레오타입 어노테이션을 사용하지 않는다.

> 상용구 코드
> - 암시적으로 표현될 수 있는 코드
> - 애플리케이션의 핵심 기능과 직접적으로 관련이 없는 구성, 설정, 초기화와 관련된 반복적이고 일반화된 코드를 의미한다.

### 4.2.2 추상화에 대한 여러 구현체 중에서 오토와이어링할 것을 선택

- @Primary 어노테이션으로 구현할 빈 중 하나를 기본값으로 표시하는 방법.
- @Qualifier 어노테이션으로 빈 이름을 지정한 후 DI를 위해 해당 이름으로 참조하는 방법.

## 4.3 스테레오타입 어노테이션으로 객체의 책임에 집중

- 서비스는 사용 사례를 구현하는 책임이 있는 객체이며, 레포지토리는 데이터 지속성을 관리하는 객체다.

## 4.4 요약

- 추상화로 구현을 분리하는 것은 클래스 설계를 구현하는 좋은 방법이다.
- 자바에서는 인터페이스로 구현을 분리한다. 또 인터페이스로 구현 간 계약을 정의한다고도 말한다.
- 의존성 주입과 함께 추상화를 사용할 때 스프링은 요청된 추상화의 구현으로 생성된 빈을 검색하는 방법을 알고 있다.
- 스프링 컨텍스트에 동일한 추상화에 대한 여러 가지 구현으로 생성된 빈이 많을 때 어떤 빈을 주입할지 지시하는 방법은 다음 두 가지다.
  1. @Primary 어노테이션을 사용하여 기본값으로 표시한다.
  2. @Qualifier 어노테이션으로 빈 이름을 지정한 후 스프링에 해당 빈 이름으로 빈을 주입한다.
- 서비스 책임이 있는 컴포넌트는 @Service 스테레오타입 어노테이션을, 레포지토리 책임이 있다면 @Repository 어노테이션을 사용한다.