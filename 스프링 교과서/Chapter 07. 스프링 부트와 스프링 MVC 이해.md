# Chapter 07. 스프링 부트와 스프링 MVC 이해

## 7.1 웹 앱이란

- 웹 브라우저로 접속하는 모든 앱은 웹 앱이다.

### 7.1.1 웹 앱에 대한 일반적인 개요

- 웹 앱은 클라이언트 측, 서버 측 두 부분으로 구성된다.
  - 클라이언트 측: 사용자가 직접 상호 작용하는 부분이다. 사용자가 앱과 상호 작용할 수 있는 방법을 제공한다. 프론트엔드라고도 한다.
  - 서버 측: 클라이언트에서 요청을 수신하고 응답에 데이터를 회신한다. 백엔드라고도 한다.
- 백엔드는 동시에 여러 클라이언트에 서비스를 제공한다는 점을 명심해야 한다.

### 7.1.2 스프링으로 웹 앱을 구현하는 다양한 방식

- 웹 앱을 만드는 방식은 다음과 같이 분류할 수 있다.
  - 클라이언트 요청에 응답하여 백엔드가 완성된 뷰를 제공하는 앱: 웹 브라우저는 백엔드에서 받은 데이터를 직접 해석하여 이 앱을 통해 사용자에게 정보를 표시한다.
  - 프론트엔드 - 백엔드 분리 방식의 앱: 이런 경우 백엔드는 원시 데이터만 제공한다.
- 프론트엔드 - 백엔드 분리를 사용하지 않는 방식은 주로 소규모 앱에 적합하다.

### 7.1.3 웹 앱 개발에서 서블릿 컨테이너 사용

- 웹 브라우저는 HTTP 프로토콜을 사용하여 네트워크를 통해 서버와 통신한다.
- HTTP를 이해하고 HTTP 요청과 응답을 자바 앱으로 변환하는 것이 필요하다. 이것이 웹 서버라고 하는 서블릿 컨테이너이다.
- 서블릿 컨테이너를 사용하면 통신 게층을 구현할 필요가 없다.
- 가장 널리 알려진 구현체 중 하나는 톰캣(Tomcat)이다.
-

> #### 서비스 컨테이너
> - 서비스 컨테이너는 여러 서블릿 인스턴스를 등록한다.
> - 각 서블릿은 각각의 경로와 연관된다.
> - 클라이언트가 요청을 보낼 때 톰캣은 클라이언트가 요청한 경로와 연관된 서블릿 메서드를 호출한다.
> - 서블릿은 요청에서 값을 얻고 톰캣이 클라이언트에 다시 전달할 응답을 생성한다.

- 서블릿은 앱 로직의 진입점이라는 점을 기억해야 한다.

> 스프링 웹 앱은 서블릿 객체를 정의한다. 이 객체가 등록되면 톰캣은 클라이언트가 요청하는 모든 경로에 대해 객체를 호출한다.

## 7.2 스프링 부트의 마법

- 스프링 부트는 현재 스프링 생태계에서 가장 인정받는 프로젝트 중 하나다.
- 스프링 부트는 구성을 위해 작성하던 코드의 상당 부분을 제거하여 앱을 보다 효율적으로 만들고 작성하는 비즈니스 코드에 집중할 수 있게 도와준다.

> #### 스프링 부트의 기능과 기능이 제공하는 이점
> - **간소화된 프로젝트 생성**: 프로젝트 초기화 서비스를 이용하여 비어 있지만 구성된 스켈레톤 앱을 얻을 수 있다.
> - **의존성 스타터**: 특정 목적에 사용되는 특정 의존성들을 의존성 스타터로 모았다. 
> - **의존성에 기반을 둔 자동 구성**: 프로젝트에 추가한 의존성에 따라 스프링 부트는 몇 가지 기본 구성을 정의한다.

### 7.2.1 프로젝트 초기화 서비스를 이용한 스프링 부트 프로젝트 생성

- 스프링 이니셜라이저를 통하여 프로젝트를 생성한다.
- 의존성 버전을 지정하지 않는 이유는 스프링 부트가 적합한 버전을 선택하도록 하기 위해서다. 이것이 바로 pom.mxl 파일에 스프링 부트 부모가 필요한 이유다.

### 7.2.2 의존성 스타터를 사용한 의존성 관리 간소화

- 의존성 스타터는 특정 목적에 맞게 앱을 구성하려고 추가하는 의존성 그룹이다.
- 의존성 스타터는 호환 가능한 의존성들의 기능 지향적 그룹이라 할 수 있다.

### 7.2.3 의존성에 기반을 둔 관례에 따라 autoconfiguration 사용

- 스프링 부트는 애플리케이션에 대한 autoconfiguration도 제공한다. 이를 구성보다 관례 원칙을 적용한다고 한다.
- 스프링 부트에서 톰캣은 서블릿 컨테이너에 대한 관례로 선택된다.
- 관례는 특정한 목적을 위해 앱을 구성하는 데 가장 많이 사용되는 방법을 나타낸다.

## 7.3 스프링 MVC로 웹 앱 구현

> 스프링 MVC 아키텍처의 HTTP 요청 처리 과정
> 1. 클라이언트가 HTTP 요청을 생성한다.
> 2. 톰캣이 요청을 수신하고 스프링 앱에 전달한다. 디스패처 서블릿이라는 컴포넌트가 HTTP 요청을 수신하고 흐름을 제어한다.
> 3. 디스패처 서블릿은 먼저 요청 경로 및 HTTP 메서드에 따라 호출할 컨트롤러의 메서드를 찾아야 한다. 메서드를 찾기 위해 핸들러 매핑을 사용한다.
> 4. 호출할 컨트롤러 메서드를 찾았다면 디스패처 서블릿은 그 메서드를 호출한다. 실행 후 컨트롤러 메서드는 뷰에서 렌더링되는 뷰 이름 및 데이터를 제공한다.
> 5. 디스패처 서블릿은 뷰를 찾고 컨트롤러가 제공한 데이터로 뷰를 렌더링한다. 렌더링한 뷰를 찾기 위해 디스패처 서블릿은 뷰 리졸버라는 컴포넌트를 사용한다.
> 6. 톰캣을 통해 HTTP 응답이 클라이언트에 반환된다.
> 7. 웹 브라우저는 HTTP 응답을 해석하고 데이터를 표시한다.

## 7.4 요약

- 웹 앱은 사용자가 웹 브라우저를 사용하여 상호 작용하는 애플리케이션이다. 웹 앱에는 클라이언트 측과 서버 측이 있다.
- 스프링 에코 시스템 프로젝트인 스프링 부트는 구성보다 관례 원칙을 적용해서 앱에 필요한 기능에 대한 기본 구성을 제공한다.
- 스프링 부트에서 제공하는 의존성 스타터로 의존성을 더 쉽게 구성할 수도 있다. 의존성 스타터는 앱에 특정 기능을 제공하고자 호환 가능한 버전들로 구성된 의존성 그룹이다.
- HTTP 요청을 받고 응답을 전달하기 위해 자바 백엔드 웹 앱에는 HTTP 요청과 응답을 자바 앱으로 변환하는 기능이 있는 소프트웨어인 서블릿 컨테이너(톰캣)이 필요하다. 서블릿 컨테이너를 사용하면 HTTP 프로토콜로 네트워크를 통한 통신을 구현할 필요가 없다.
- 스프링 부트는 HTTP 요청을 가로채고 관리하는 컴포넌트 집합을 구성한다. 이 컴포넌트들은 스프링 MVC라고 하는 클래스 설계의 일부다.
- 스프링 부트는 스프링 MVC 컴포넌트와 서블릿 컨테이너를 자동 구성하기 때문에 앱이 응답으로 보내는 데이터를 포함하는 HTML 문서와 최소한의 HTTP 요청-응답 흐름 작업을 위한 컨트롤러 클래스만 작성하면 된다.